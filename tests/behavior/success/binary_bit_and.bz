function bit_and_test(consteval a, consteval b, consteval result)
{
	let dyn_a = a;
	let dyn_b = b;
	if ((dyn_a & dyn_b) != result) unreachable;

	mut dyn_a = a;
	dyn_a &= b;
	if (dyn_a != result) unreachable;
}

function main()
{
	bit_and_test(false, false, false);
	bit_and_test(true, false, false);
	bit_and_test(false, true, false);
	bit_and_test(true, true, true);

	bit_and_test(~0u8, 0u8, 0u8);
	bit_and_test(~0u8, 213u8, 213u8);
	bit_and_test(
		0b1101'0110u8,
		0b0111'1011u8,
		0b0101'0010u8,
	);

	bit_and_test(~0u16, 0u16, 0u16);
	bit_and_test(~0u16, 13913u16, 13913u16);
	bit_and_test(
		0b0111'0110'1011'0011u16,
		0b1011'0010'1110'0110u16,
		0b0011'0010'1010'0010u16,
	);

	bit_and_test(~0u32, 0u32, 0u32);
	bit_and_test(~0u32, 1391003u32, 1391003u32);
	bit_and_test(
		0b0111'0110'1011'0011u32,
		0b1011'0010'1110'0110u32,
		0b0011'0010'1010'0010u32,
	);
	bit_and_test(
		0b0111'0110'1011'0011u32 << 16,
		0b1011'0010'1110'0110u32 << 16,
		0b0011'0010'1010'0010u32 << 16,
	);

	bit_and_test(~0u64, 0u64, 0u64);
	bit_and_test(~0u64, 1391301249876u64, 1391301249876u64);
	bit_and_test(
		0b0111'0110'1011'0011u64,
		0b1011'0010'1110'0110u64,
		0b0011'0010'1010'0010u64,
	);
	bit_and_test(
		0b0111'0110'1011'0011u64 << 16,
		0b1011'0010'1110'0110u64 << 16,
		0b0011'0010'1010'0010u64 << 16,
	);
	bit_and_test(
		0b0111'0110'1011'0011u64 << 32,
		0b1011'0010'1110'0110u64 << 32,
		0b0011'0010'1010'0010u64 << 32,
	);
	bit_and_test(
		0b0111'0110'1011'0011u64 << 48,
		0b1011'0010'1110'0110u64 << 48,
		0b0011'0010'1010'0010u64 << 48,
	);
}
